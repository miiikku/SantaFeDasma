<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Barangay Santa Fe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        inter: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>
<body class="font-inter m-0 p-0 bg-gray-100 flex flex-col min-h-screen">

    <!-- Header -->
    <header class="bg-green-900 flex flex-col md:flex-row justify-between items-center p-4 relative">
        <div class="mb-2 md:mb-0">
            <img src="https://www.dropbox.com/scl/fi/fan2zv4s27rhmpd7gmtex/brgystafe.png?rlkey=exhrm1gcwkaik313g0r9al119&st=2j1m6lkb&dl=1" alt="Barangay Santa Fe Logo" class="h-20">
        </div>

        <!-- Navigation Menu for Desktop -->
        <nav id="nav-menu" class="w-full md:w-auto md:flex md:gap-4 md:text-white md:font-bold md:text-sm md:tracking-wide justify-center px-4 hidden md:block">
            <ul class="flex flex-row flex-wrap gap-4 text-white font-bold text-sm tracking-wide justify-center px-4">
                <li><a href="home.html" class="hover:underline">HOME</a></li>
                <li><a href="offices.html" class="hover:underline">OFFICES</a></li>
                <li><a href="request-document.html" class="hover:underline">REQUEST DOCUMENT</a></li>
                <li><a href="#about-section" class="hover:underline">ABOUT</a></li>
                <li>
                    <a href="#" id="user-icon-large">
                        <img src="https://www.dropbox.com/scl/fi/tnounxbo8vd5763gnoysp/userAccountWhite.png?rlkey=hyos7zrh4ghwr66mjivsqfd5b&st=07eppc1l&dl=1" alt="user-icon" class="w-5 h-5 rounded-full">
                    </a>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Bottom Navigation Menu (for smaller screens) -->
    <div id="bottom-nav" class="md:hidden fixed bottom-0 left-0 right-0 bg-green-900 text-white p-3 flex justify-between items-center z-50">
        <a href="home.html" class="text-white flex flex-col items-center">
            <img src="https://www.dropbox.com/scl/fi/3tjxqwr2t3q0ukrejpmxo/home.png?rlkey=8bgfkys4b41atoditmzgr0nnu&st=diqx81gd&dl=1" class="w-6 h-6">
            <span class="text-xs mt-1">Home</span>
        </a>
        <a href="offices.html" class="text-white flex flex-col items-center">
            <img src="https://www.dropbox.com/scl/fi/uojsh4dfz5nrgxuv5w4gi/briefcase.png?rlkey=jrbggymeimeit6uljo4sckk8j&st=r0saupw7&dl=1" class="w-6 h-6">
            <span class="text-xs mt-1">Offices</span>
        </a>
        <a href="request-document.html" class="text-white flex flex-col items-center">
            <img src="https://www.dropbox.com/scl/fi/al2r2ujmkjeynpixrw0gd/google-docs-4.png?rlkey=0tdrfo5y05uimuc45nbgrcsqg&st=kcrekqtm&dl=1" class="w-6 h-6">
            <span class="text-xs mt-1">Request</span>
        </a>
        <a href="#about-section" class="text-white flex flex-col items-center">
            <img src="https://www.dropbox.com/scl/fi/1cbd3lleyhj1dvcjow5g1/info.png?rlkey=8npgc5r5ozjdg10746kf9wsol&st=r963bvwj&dl=1" class="w-6 h-6">
            <span class="text-xs mt-1">About</span>
        </a>
        <a href="#" class="text-white flex flex-col items-center" id="user-icon-small">
            <img src="https://www.dropbox.com/scl/fi/1xu3gg1oyp6gccvbymulh/user-2.png?rlkey=u8jb7s2tfha43mcan1hhlmbf3&st=krl9gh62&dl=1" class="w-6 h-6">
            <span class="text-xs mt-1">Login</span>
        </a>   
    </div>


    <!-- Main Content -->
    <main class="flex-grow p-8">
        <section class="user-profile bg-white p-8 rounded-2xl shadow-lg max-w-3xl mx-auto">
            <div class="profile-header flex items-center gap-6 mb-6">
                <img id="resident-profile-pic" src="" alt="Profile Picture" class="profile-pic w-24 h-24 rounded-full border-4 border-green-600 shadow-md">
                <div>
                    <h1 id="resident-name" class="text-2xl font-bold text-green-800">Loading...</h1>
                    <p class="username text-lg text-gray-600 mt-2" id="resident-username"><strong>Username:</strong> Loading...</p>
                </div>
            </div>
    
            <!-- Profile Details -->
            <div class="profile-details space-y-2">
                <div class="detail-group flex justify-between py-1">
                    <span class="font-semibold text-gray-700 w-1/3">Name:</span>
                    <span id="resident-name-detail" class="text-gray-900 w-2/3">Loading...</span>
                </div>
                <div class="detail-group flex justify-between py-1">
                    <span class="font-semibold text-gray-700 w-1/3">Voter Status:</span>
                    <span id="resident-voter-status" class="text-gray-900 w-2/3">Loading...</span>
                </div>
                <div class="detail-group flex justify-between py-1">
                    <span class="font-semibold text-gray-700 w-1/3">Age:</span>
                    <span id="resident-age" class="text-gray-900 w-2/3">Loading...</span>
                </div>
                <div class="detail-group flex justify-between py-1">
                    <span class="font-semibold text-gray-700 w-1/3">PWD/Senior:</span>
                    <span id="resident-pwd-senior" class="text-gray-900 w-2/3">Loading...</span>
                </div>
                <div class="detail-group flex justify-between py-1">
                    <span class="font-semibold text-gray-700 w-1/3">Birthdate:</span>
                    <span id="resident-birthdate" class="text-gray-900 w-2/3">Loading...</span>
                </div>
                <div class="detail-group flex justify-between py-1">
                    <span class="font-semibold text-gray-700 w-1/3">Address:</span>
                    <span id="resident-address" class="text-gray-900 w-2/3">Loading...</span>
                </div>
                <div class="detail-group flex justify-between py-1">
                    <span class="font-semibold text-gray-700 w-1/3">Gender:</span>
                    <span id="resident-gender" class="text-gray-900 w-2/3">Loading...</span>
                </div>
                <div class="detail-group flex justify-between py-1">
                    <span class="font-semibold text-gray-700 w-1/3">Starting Date of Residency:</span>
                    <span id="resident-startdate" class="text-gray-900 w-2/3">Loading...</span>
                </div>
                <div class="detail-group flex justify-between py-1">
                    <span class="font-semibold text-gray-700 w-1/3">Civil Status:</span>
                    <span id="resident-civilstatus" class="text-gray-900 w-2/3">Loading...</span>
                </div>
                <div class="detail-group flex justify-between py-1">
                    <span class="font-semibold text-gray-700 w-1/3">Years Residing:</span>
                    <span id="resident-yearsresiding" class="text-gray-900 w-2/3">Loading...</span>
                </div>
                <div class="detail-group flex justify-between py-1">
                    <span class="font-semibold text-gray-700 w-1/3">Contact Number:</span>
                    <span id="resident-contactnumber" class="text-gray-900 w-2/3">Loading...</span>
                </div>
                <div class="detail-group flex justify-between py-1">
                    <span class="font-semibold text-gray-700 w-1/3">Email:</span>
                    <span id="resident-email" class="text-gray-900 w-2/3">Loading...</span>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-green-900 text-white text-center py-6 font-light tracking-wide font-inter pb-24">
        <div class="mb-4">
            <ul class="flex flex-row flex-wrap justify-center gap-4 font-bold text-sm tracking-wide">
                <li><a href="home.html" class="hover:underline">HOME</a></li>
                <li><a href="offices.html" class="hover:underline">OFFICES</a></li>
                <li><a href="request-document.html" class="hover:underline">REQUEST DOCUMENT</a></li>
            </ul>
        </div>
        <hr class="border-white w-3/4 mx-auto my-4">
        <div class="px-6 text-sm mb-4">
            <p class="font-inter">Santa Fe Barangay Hall is a town hall in Dasmari√±as, Cavite near the Santa Fe Multi-Purpose Court and Half Court.</p>
        </div>
        <div class="text-xs">
            <p class="font-inter">&copy; 2025 Barangay Santa Fe. All rights reserved.</p>
        </div>
    </footer>

    <!-- User Profile Popup -->
    <div id="user-popup" class="user-popup hidden absolute right-4 top-20 bg-white shadow-lg p-4 rounded-lg w-64 border border-gray-200 z-20">
        <div class="user-header flex justify-between items-center border-b border-gray-300 pb-2 mb-3">
            <span class="text-lg font-semibold text-gray-800">User Options</span>
            <span class="close-btn cursor-pointer font-bold text-xl text-gray-600 hover:text-gray-800" onclick="toggleUserPopup()">&times;</span>
        </div>
        <div class="user-content space-y-2">
            <a href="user-profile.html" class="block text-gray-800 hover:text-green-600 transition-colors duration-200">User Profile</a>
            <a href="/logout" class="block text-gray-800 hover:text-red-600 transition-colors duration-200">Logout</a>
        </div>
    </div>

    <script src="public/styles/users.js"></script>
    <script src="/public/js/sessionTimeout.js"></script>

    <script>
        // Fetch resident profile data
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/user-profile-data')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('resident-name').textContent = `${data.Firstname} ${data.Middlename} ${data.Lastname}`;
                    document.getElementById('resident-name-detail').textContent = `${data.Firstname} ${data.Middlename} ${data.Lastname}`;
                    document.getElementById('resident-username').textContent = `Username: ${data.username}`; 
                    document.getElementById('resident-birthdate').textContent = data.birthdate;
                    document.getElementById('resident-age').textContent = data.age;
                    document.getElementById('resident-gender').textContent = data.gender;
                    document.getElementById('resident-civilstatus').textContent = data.civilstatus;
                    document.getElementById('resident-pwd-senior').textContent = data['PWD/Senior'];
                    document.getElementById('resident-voter-status').textContent = data['Voter Status'];
                    document.getElementById('resident-contactnumber').textContent = data['Contact Number'];
                    document.getElementById('resident-address').textContent = data.Address;
                    document.getElementById('resident-startdate').textContent = data.startDate;
                    document.getElementById('resident-yearsresiding').textContent = data.yearsresiding;
                    document.getElementById('resident-email').textContent = data["e-mail"];
                
                    const picEl = document.getElementById('resident-profile-pic');
            if (data.Profilepic && data.Profilepic !== '') {
                picEl.src = data.Profilepic;
            }
                })
                .catch(error => console.error('Error fetching profile data:', error));
        });
    </script>
</body>
</html>